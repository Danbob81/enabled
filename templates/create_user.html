{% extends 'base.html' %}
{% block content %}

<div class="card">
  <div class="card-content">
      <h3 class="center-align">Manage Users</h3>
      {% if session.user %}
        <p class="right-align">You are logged in as: {{session['user']}}</p>
      {% endif %}
  </div>
</div>

<ul class="collapsible">
  <li class="active">
    <div class="collapsible-header">Search Users</div>
    <div class="collapsible-body">
      <div class="col s12">
        <form action="{{ url_for('search_user') }}" method="POST" class="col s12">
          <div class="row valign-wrapper center-align">
            <div class="input-field col s12 m8">
                <i class="fas fa-search prefix black-text"></i>
                <input type="text" name="query" id="query" minlength="3" class="validate" required>
                <label for="query">Enter: Employee name</label>
            </div>
            <div class="col s12 m4">
                <a href="{{ url_for('get_users') }}" class="btn text-shadow">Reset</a>
                <button type="submit" class="btn text-shadow">
                    <i class="fas fa-search left"></i> Search
                </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </li>
  <li>
    <div class="collapsible-header">Create New User</div>
    <div class="collapsible-body">
      <form method="POST" action="{{ url_for('users') }}">
          <div class="row">
              <!-- username -->
              <div class="input-field col s12 l6 offset-l3">
                  <input id="username" name="username" type="text" minlength="5"
                      maxlength="15" pattern="^[a-zA-Z0-9]{5,15}$" class="validate" required>
                  <label for="username">Username</label>
              </div>
              <!-- password -->
              <div class="input-field col s12 l6 offset-l3">
                  <input id="password" name="password" type="password" minlength="5"
                      maxlength="15" pattern="^[a-zA-Z0-9]{5,15}$" class="validate" required>
                  <label for="password">Password</label>
              </div>
              <!-- name -->
              <div class="input-field col s12 l6 offset-l3">
                  <input id="employee_name" name="employee_name" type="text" class="validate" required>
                  <label for="employee_name">Employee Name</label>
              </div>
              <!-- email -->
              <div class="input-field col s12 l6 offset-l3">
                  <input id="employee_email" name="employee_email" type="email" class="validate" required>
                  <label for="employee_email">Employee Email</label>
              </div>
              <button type="submit" class="waves-effect waves-green btn-flat col s12 l6 offset-l3 center-align">Create User</button>
          </div>
        </form>
    </div>
  </li>
</ul>
<ul class="collapsible">
    <li class="active">
        <div class="collapsible-header">Results</div>
        <div class="collapsible-body">
          <ul class="collection">
            {% for employee in employees %}
              <li class="collection-item">
                <div>Name: {{ employee.employee_name }} 
                  <br> Email: {{ employee.employee_email }}
                  <br> Username: {{ employee.username }} 
                  <br> Password: (hidden)
                </div>
                <div class="col s12 l6 left-align">
                  <a href="{{ url_for('edit_user', employee_id=employee._id) }}" 
                            class="waves-effect waves-green btn-white">Edit User <i class="fa-solid fa-pen-to-square"></i></a>
                </div>
              </li>
            {% endfor %}
          </ul>
        </div>
    </li>
</ul>


{% endblock %}