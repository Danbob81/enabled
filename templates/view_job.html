{% extends 'base.html' %}

{% block content %}

<div class="card">
    <div class="card-content">
        <h3 class="center-align">Minor Works Order</h3>
        {% if session.user %}
          <p class="right-align">You are logged in as: {{session['user']}}</p>
        {% endif %}
    </div>
</div>

<div class="card">
    <div class="card-content">
        <div class="row">
            <div class="col s12">
                <!-- Complete -->
                {% if job.is_comp == "on" %}
                    <ul class="collection with-header">
                        <li class="collection-item">
                            <div class="col s12 l6 left-align">
                                <h5>Order Complete</h5>
                            </div>
                            <div class="col s12 l6 right-align">
                                <br>
                                <p class="right-align">Completion Date: {{ job.comp_date }}</p>
                            </div>
                        </li>
                    </ul>
                {% endif %}
                <!-- Priority -->
                <ul class="collection with-header">
                    <li class="collection-header"><h5>Priority</h5></li>
                    <li class="collection-item">
                        <div class="col s12 l6">
                            {% if job.is_urgent == "on" %}
                                <p><i class="fas fa-exclamation-circle red-text tooltipped"
                                data-position="right" data-tooltip="URGENT!"></i> Urgent</p>
                            {% else %}
                                <p>Non-urgent</p>
                            {% endif %}
                        </div>
                        <div class="col s12 l6 right-align">
                            <p>Due Date: {{ job.due_date }}</p>
                        </div>
                    </li>
                </ul>
                <!-- Customer Details -->
                <ul class="collection with-header">
                    <li class="collection-header"><h5>Customer Details</h5></li>
                    <li class="collection-item">
                        <div class="col s12 l6 left-align">
                            <p>Name:   {{ job.first_name }} {{ job.last_name }}</p> <br>
                            <p>Address: {{ job.address }}, {{ job.address_street }}, {{ job.address_city }}, {{ job.address_county }}, 
                                    {{ job.postcode }} <br> Property Tenure: {{ job.tenure }}</p> <br>
                            <p>Phone: {{ job.phone }} <br> Email: {{ job.email }}</p> <br>
                        </div>
                    </li>
                </ul>
                <!-- Adaptation -->
                <ul class="collection with-header">
                    <li class="collection-header"><h5>Type of Adaptation</h5></li>
                    <li class="collection-item">
                        {% if job.keysafe =="on" %}
                            <div class="col s12 l6">
                                <p>
                                    Keysafe <br>
                                    Location: 
                                    {% if job.keysafe_text %}
                                        {{ job.keysafe_text }}
                                    {% endif %}
                                </p><br>
                            </div>
                        {% endif %}
                        {% if job.int_grab =="on" %}
                            <div class="col s12 l6">
                                <p>
                                    Internal Grab Rail <br>
                                    Information: 
                                    {% if job.int_grab_text %}
                                        {{ job.int_grab_text }}
                                    {% endif %}
                                </p><br>
                            </div>
                        {% endif %}
                        {% if job.ext_grab =="on" %}
                            <div class="col s12 l6">
                                <p>
                                    External Grab Rail <br>
                                    Information: 
                                    {% if job.ext_grab_text %}
                                        {{ job.ext_grab_text }}
                                    {% endif %}
                                </p><br>
                            </div>
                        {% endif %}
                        {% if job.drop_rail =="on" %}
                            <div class="col s12 l6">
                                <p>
                                    Drop Arm Rail <br>
                                    Information: 
                                    {% if job.drop_rail_text %}
                                        {{ job.drop_rail_text }}
                                    {% endif %}
                                </p><br>
                            </div>
                        {% endif %}
                        {% if job.newel =="on" %}
                            <div class="col s12 l6">
                                <p>
                                    Newel Rail <br>
                                    Information: 
                                    {% if job.newel_text %}
                                        {{ job.newel_text }}
                                    {% endif %}
                                </p><br>
                            </div>
                        {% endif %}
                        {% if job.stair_rail =="on" %}
                            <div class="col s12 l6">
                                <p>
                                    Second Stair Rail <br>
                                    Information: 
                                    {% if job.stair_rail_text %}
                                        {{ job.stair_rail_text }}
                                    {% endif %}
                                </p><br>
                            </div>
                        {% endif %}
                        {% if job.handrail =="on" %}
                            <div class="col s12 l6">
                                <p>
                                    External Handrail <br>
                                    Information: 
                                    {% if job.handrail_text %}
                                        {{ job.handrail_text }}
                                    {% endif %}
                                </p><br>
                            </div>
                        {% endif %}
                        {% if job.step =="on" %}
                            <div class="col s12 l6">
                                <p>
                                    Half Step <br>
                                    Information: 
                                    {% if job.step_text %}
                                        {{ job.step_text }}
                                    {% endif %}
                                </p><br>
                            </div>
                        {% endif %}
                        {% if job.ramp =="on" %}
                            <div class="col s12 l6">
                                <p>
                                    Access Ramp <br>
                                    Information: 
                                    {% if job.ramp_text %}
                                        {{ job.ramp_text }}
                                    {% endif %}
                                </p><br>
                            </div>
                        {% endif %}
                        {% if job.shower =="on" %}
                            <div class="col s12 l6">
                                <p>
                                    Over Bath Shower <br>
                                    Information: 
                                    {% if job.shower_text %}
                                        {{ job.shower_text }}
                                    {% endif %}
                                </p><br>
                            </div>
                        {% endif %}
                        {% if job.other =="on" %}
                            <div class="col s12 l6">
                                <p>
                                    Other Adaptation <br>
                                    Information: 
                                    {% if job.other_text %}
                                        {{ job.other_text }}
                                    {% endif %}
                                </p><br>
                            </div>
                        {% endif %}
                    </li>
                </ul>
                <!-- Referrer -->
                <ul class="collection with-header">
                    <li class="collection-header"><h5>Referrer Details</h5></li>
                    <li class="collection-item">
                        <div class="col s12 l6">
                            <p>Name: {{ job.ref_name }}</p> <br>
                            <p>Team/Job Title: {{ job.team }}</p> <br>
                        </div>
                        <div class="col s12 l6">
                            <p>Phone: {{ job.ref_phone }}</p> <br>
                            <p>Email: {{ job.ref_email }}</p> <br>
                        </div>
                    </li>
                </ul>
                <!-- Notes -->
                <ul class="collection with-header">
                    <li class="collection-header"><h5>Notes</h5></li>
                    <li class="collection-item">
                        <div class="col s12 l6">
                            <p>{{ job.notes }}</p> <br>
                        </div>
                    </li>
                </ul>
                <!-- User info -->
                <ul class="collection">
                    <li class="collection-item right-align">
                        <div class="col s12">
                            <p>Record created by user: {{ job.created_by }} <br>
                               Record last amended by user: {{ job.amended_by }}
                            </p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- Return -->
<div class="card">
    <div class="card-content">
        <div class="row">
            <div class="col s12 center-align">
                <form action="{{ url_for('search_jobs', customer_id=customer._id) }}" method="POST" class="col s12">
                    <button type="submit" class="btn">Return <i class="fa-solid fa-arrow-left"></i></button>
                    <input type="text" name="query" id="query" value="{{ job.first_name }}" class="validate" hidden required>
                    <input type="text" name="query" id="query" value="{{ job.last_name }}" class="validate" hidden required>
                    <input type="text" name="query" id="query" value="{{ job.address_street }}" class="validate" hidden required>
                    <input type="text" name="query" id="query" value="{{ job.postcode }}" class="validate" hidden required>
                    <label for="query"></label>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}